# TravelDot - UI/UX 設計規格

## 1. 設計原則

### 核心原則
- **地圖優先**: 地圖始終占據主要視覺空間 (至少 60% 螢幕)
- **最小化點擊**: 核心操作不超過 3 步
- **即時回饋**: 所有操作 200ms 內要有視覺回饋
- **容錯設計**: 重要操作要有確認,可逆操作要有 Undo

### 視覺風格
- **配色**: 
  - Primary: 藍色系 (#3B82F6)
  - Secondary: 綠色系 (#10B981)
  - Accent: 橘色 (#F59E0B)
  - Background: 白色/淺灰
- **圓角**: 統一使用 8px border-radius
- **陰影**: 使用 Tailwind 的 shadow-md / shadow-lg
- **字體**: 
  - 中文: Noto Sans TC
  - 英文: Inter

---

## 2. 頁面結構與佈局

### 2.1 登入頁 (LoginPage)

#### 桌面版佈局
```
┌─────────────────────────────────────────────────┐
│                                                 │
│              [TravelDot Logo]                   │
│           Every Dot Tells a Story               │
│                                                 │
│   ┌─────────────────────────────────┐          │
│   │  Email                          │          │
│   │  [________________]             │          │
│   │                                 │          │
│   │  Password                       │          │
│   │  [________________]             │          │
│   │                                 │          │
│   │  [    Login Button    ]         │          │
│   │                                 │          │
│   │  ──────── or ────────           │          │
│   │                                 │          │
│   │  [ Sign in with Google ]        │          │
│   │                                 │          │
│   │  Don't have account? Sign up    │          │
│   └─────────────────────────────────┘          │
│                                                 │
│        [Background: Travel Image]               │
└─────────────────────────────────────────────────┘
```

#### 手機版佈局
```
┌─────────────────┐
│  [Logo]         │
│  TravelDot      │
│                 │
│  Email          │
│  [__________]   │
│                 │
│  Password       │
│  [__________]   │
│                 │
│  [ Login ]      │
│                 │
│  [ Google ]     │
│                 │
│  Sign up        │
└─────────────────┘
```

#### 組件規格
- **Logo**: 
  - 尺寸: 120x120px
  - 格式: SVG
  - 位置: 置中
  
- **輸入框**:
  - 高度: 48px
  - 寬度: 100% (max 400px)
  - Border: 1px solid #E5E7EB
  - Focus: border 變 #3B82F6
  - Padding: 12px 16px
  
- **登入按鈕**:
  - 高度: 48px
  - 寬度: 100%
  - 背景: #3B82F6
  - Hover: #2563EB
  - 文字: 白色, 16px, font-semibold
  - 圓角: 8px

- **Google 登入按鈕**:
  - 高度: 48px
  - 寬度: 100%
  - 背景: 白色
  - Border: 1px solid #E5E7EB
  - Icon: Google logo (24px)
  - 文字: #374151

#### 互動細節
1. **Email 驗證**:
   - 即時驗證格式 (失焦時)
   - 錯誤訊息顯示在輸入框下方
   - 錯誤時輸入框 border 變紅色
   
2. **密碼輸入**:
   - 預設隱藏
   - 右側有「眼睛」icon 可切換顯示/隱藏
   
3. **登入按鈕**:
   - 點擊後顯示 loading spinner
   - 按鈕文字變成「登入中...」
   - 按鈕變 disabled 狀態

4. **錯誤處理**:
   - 登入失敗: 在表單上方顯示紅色 Alert
   - 錯誤訊息: 「帳號或密碼錯誤,請重試」
   - Alert 可以點 X 關閉

---

### 2.2 Landing Page (旅程列表)

#### 桌面版佈局
```
┌─────────────────────────────────────────────────────────┐
│  [TravelDot]              [Search]        [Profile ▼]   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  My Trips                              [+ New Trip]     │
│                                                         │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │
│  │ [Cover img]  │  │ [Cover img]  │  │ [Cover img]  │ │
│  │              │  │              │  │              │ │
│  │ 泰國之旅     │  │ 日本賞櫻     │  │ 台灣環島     │ │
│  │ Mar 1-15     │  │ Apr 1-10     │  │ May 1-7      │ │
│  │ 12 places    │  │ 8 places     │  │ 15 places    │ │
│  └──────────────┘  └──────────────┘  └──────────────┘ │
│                                                         │
│  ┌──────────────┐  ┌──────────────┐                   │
│  │ [Cover img]  │  │ [Add New]    │                   │
│  │              │  │              │                   │
│  │ 韓國首爾     │  │   +          │                   │
│  │ Jun 1-5      │  │              │                   │
│  │ 6 places     │  │              │                   │
│  └──────────────┘  └──────────────┘                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### 手機版佈局
```
┌─────────────────┐
│ TravelDot    ≡  │
├─────────────────┤
│ My Trips        │
│ [+ New Trip]    │
│                 │
│ ┌─────────────┐ │
│ │[Cover img]  │ │
│ │泰國之旅     │ │
│ │Mar 1-15     │ │
│ │12 places    │ │
│ └─────────────┘ │
│                 │
│ ┌─────────────┐ │
│ │[Cover img]  │ │
│ │日本賞櫻     │ │
│ │Apr 1-10     │ │
│ │8 places     │ │
│ └─────────────┘ │
│                 │
│ ┌─────────────┐ │
│ │  Add New    │ │
│ │     +       │ │
│ └─────────────┘ │
└─────────────────┘
```

#### 組件規格

**Header**:
- 高度: 64px
- 背景: 白色
- Border-bottom: 1px solid #E5E7EB
- Padding: 0 24px

**Trip Card**:
- 尺寸: 
  - 桌面: 300x240px
  - 手機: 100% x 180px
- 封面圖:
  - 高度: 160px
  - Object-fit: cover
- 內容區:
  - Padding: 16px
  - 標題: 18px, font-semibold
  - 日期: 14px, text-gray-600
  - 地點數: 14px, text-gray-500
- Hover:
  - Shadow: shadow-md → shadow-lg
  - Transform: translateY(-4px)
  - Transition: 200ms

**New Trip Button**:
- 高度: 48px
- 背景: #3B82F6
- 文字: 白色, 16px
- Icon: Plus (+)
- 圓角: 8px
- Hover: 背景變 #2563EB

#### 互動細節

1. **點擊 Trip Card**:
   - 跳轉到該旅程的地圖頁面
   - 使用 fade-in 轉場動畫

2. **New Trip 流程**:
   - 點擊 [+ New Trip] 按鈕
   - 彈出 Modal (見下方 Modal 規格)
   - 填寫旅程名稱、日期
   - 點擊 Create → 關閉 Modal → 新卡片出現在列表最前方

3. **Card 長按/右鍵**:
   - 顯示選單: Edit / Delete / Share
   - Delete 要跳確認對話框

---

### 2.3 地圖主頁面 (MapPage)

#### 桌面版佈局 (最重要!)
```
┌─────────────────────────────────────────────────────────────┐
│ [TravelDot]  [泰國之旅 ▼]  [Map/List]  [Filter]  [Profile] │
├─────────────────────────────────────────────────────────────┤
│                                    │                        │
│                                    │  ┌──────────────────┐  │
│                                    │  │ 清邁             │  │
│       [Google Maps]                │  │ 12 places        │  │
│                                    │  ├──────────────────┤  │
│       • • •  (pins)                │  │ □ Cafe Amazon   │  │
│                                    │  │   Mar 5, 14:30  │  │
│                                    │  │   ⭐⭐⭐⭐⭐    │  │
│                                    │  │                 │  │
│                                    │  │ □ Night Market  │  │
│                                    │  │   Mar 6, 19:00  │  │
│         [+ 按鈕]                   │  │   ⭐⭐⭐⭐      │  │
│                                    │  │                 │  │
│                                    │  │ □ Doi Suthep   │  │
│                                    │  │   Mar 7, 09:00  │  │
│                                    │  │   ⭐⭐⭐⭐⭐    │  │
│                                    │  └──────────────────┘  │
│                                    │                        │
└─────────────────────────────────────────────────────────────┘
     70%                                    30%
```

#### 手機版佈局
```
┌─────────────────┐
│ ≡  泰國之旅  ⋮  │
├─────────────────┤
│                 │
│  [Google Map]   │
│                 │
│    • • •        │
│                 │
│                 │
│                 │
│      [+]        │ ← Floating Action Button
│                 │
├─────────────────┤ ← 可向上拉的 Sheet
│ ═══ 12 places   │
│                 │
│ □ Cafe Amazon   │
│   Mar 5         │
└─────────────────┘
```

#### 關鍵組件規格

**1. Floating Action Button (FAB)**
- 位置: 右下角,距離邊緣 24px
- 尺寸: 56x56px (圓形)
- 背景: #3B82F6
- Icon: Plus (+), 24px, 白色
- Shadow: shadow-lg
- Hover: 
  - 背景變 #2563EB
  - Scale 1.1
  - Shadow 變深
- 點擊:
  - 彈出選單 (向上展開)
  - 選項: 
    - 📍 搜尋地點
    - 📌 使用當前位置
    - 🗺️ 在地圖上選點

**2. Map Pin (標記點)**
- **預設狀態**:
  - Icon: 標準 Google Maps pin
  - 顏色: #3B82F6
  - 尺寸: 32x40px
  
- **Hover 狀態**:
  - Scale: 1.2
  - Cursor: pointer
  
- **已選中狀態**:
  - 顏色: #F59E0B (橘色)
  - 上下跳動動畫

- **Clustering (聚合)**:
  - 圓形背景: #3B82F6
  - 白色文字顯示數量
  - 尺寸隨數量增加: 40px, 50px, 60px

**3. 側邊欄 (Sidebar - 桌面版)**
- 寬度: 360px
- 背景: 白色
- Border-left: 1px solid #E5E7EB
- 可收合 (點擊箭頭圖示)

**4. Bottom Sheet (手機版)**
- 預設高度: 160px (顯示標題 + 前 2 個地點)
- 完全展開: 80vh
- 背景: 白色
- 圓角: 上方 16px
- 拖曳手柄: 中央有灰色橫條 (36x4px)

**5. Place Preview Card (點擊 Pin 時顯示)**
```
┌─────────────────────────────┐
│ [關閉 X]                    │
│                             │
│ [照片輪播]                  │
│                             │
│ Cafe Amazon                 │
│ 📍 Nimmana Haeminda Rd      │
│ 📅 Mar 5, 2024 14:30        │
│ ⭐⭐⭐⭐⭐                 │
│                             │
│ 很棒的工作空間...          │
│                             │
│ #咖啡 #工作空間 #推薦      │
│                             │
│ [   Edit   ] [ Delete ]     │
└─────────────────────────────┘
```

- 位置: 地圖中央
- 尺寸: 
  - 桌面: 400x auto (max-height: 600px)
  - 手機: 90% width x auto
- 背景: 白色
- Shadow: shadow-xl
- 圓角: 12px
- 照片輪播:
  - 高度: 240px
  - 左右箭頭導航
  - 底部 dots 指示器

#### 互動流程

**新增地點完整流程:**

1. **點擊 FAB (+)**
   ```
   展開選單:
   ┌─────────────────┐
   │ 📍 搜尋地點     │
   │ 📌 當前位置     │
   │ 🗺️ 地圖選點   │
   └─────────────────┘
   ```

2. **選擇「搜尋地點」**
   - 彈出全螢幕搜尋介面
   - 頂部: 搜尋框 + 取消按鈕
   - 下方: 搜尋建議列表 (Google Places)
   - 點擊建議 → 跳到步驟 4

3. **選擇「當前位置」**
   - 自動抓取 GPS 座標
   - 地圖中心移到當前位置
   - 顯示 Pin
   - 跳到步驟 4

4. **選擇「地圖選點」**
   - 地圖進入「選點模式」
   - 十字準星出現在地圖中央
   - 拖動地圖 = 移動準星
   - 底部顯示「確認位置」按鈕
   - 點擊 → 跳到步驟 4

5. **打開編輯器 Modal**
   - 全螢幕 Modal (手機)
   - 置中 Modal (桌面,寬度 600px)
   - 預填地點名稱和座標
   - 可編輯所有欄位

6. **儲存**
   - 點擊「儲存」按鈕
   - 顯示 loading
   - 儲存成功:
     - Toast 通知:「地點已新增」
     - 關閉 Modal
     - 地圖上出現新 Pin
     - 側邊欄列表更新

---

### 2.4 編輯器 Modal (PlaceEditor)

#### 桌面版佈局
```
┌────────────────────────────────────────────────┐
│ 新增地點                              [關閉 X] │
├────────────────────────────────────────────────┤
│                                                │
│ 地點名稱 *                                     │
│ [Cafe Amazon_________________________]         │
│                                                │
│ 地址 (自動填入)                                │
│ [239 Nimmana Haeminda Rd Ln 1________]         │
│                                                │
│ 日期與時間 *                                   │
│ [2024/03/05] [14:30]                           │
│                                                │
│ 評分                                           │
│ ⭐⭐⭐⭐⭐ (可點擊)                          │
│                                                │
│ 照片                                           │
│ ┌────┐ ┌────┐ ┌────┐ [+ 新增]              │
│ │img1│ │img2│ │img3│                         │
│ └────┘ └────┘ └────┘                         │
│                                                │
│ 內容                                           │
│ ┌──────────────────────────────────────┐      │
│ │ [B] [I] [Link] [List]                │      │
│ ├──────────────────────────────────────┤      │
│ │                                      │      │
│ │ 很棒的工作空間,咖啡也不錯...       │      │
│ │                                      │      │
│ └──────────────────────────────────────┘      │
│                                                │
│ 標籤                                           │
│ [#咖啡] [#工作空間] [+ 新增標籤]              │
│                                                │
│ 公開設定                                       │
│ [✓] 讓其他人可以搜尋到這個地點                 │
│                                                │
│           [取消]        [儲存]                 │
└────────────────────────────────────────────────┘
```

#### 手機版佈局
```
┌─────────────────┐
│ ← 新增地點      │
├─────────────────┤
│                 │
│ 地點名稱 *      │
│ [__________]    │
│                 │
│ 日期 *          │
│ [2024/03/05]    │
│                 │
│ 評分            │
│ ⭐⭐⭐⭐⭐    │
│                 │
│ 照片            │
│ [img][img][+]   │
│                 │
│ 內容            │
│ [編輯器]        │
│                 │
│ 標籤            │
│ [#咖啡][+]      │
│                 │
│ 公開 [✓]        │
│                 │
│    [儲存]       │
└─────────────────┘
```

#### 詳細組件規格

**1. 照片上傳區**
- **上傳按鈕**:
  - 尺寸: 80x80px
  - 背景: #F3F4F6
  - Border: 2px dashed #D1D5DB
  - Icon: Plus (+)
  - Hover: 背景變 #E5E7EB

- **照片縮圖**:
  - 尺寸: 80x80px
  - 圓角: 8px
  - Object-fit: cover
  - 右上角有 X 刪除按鈕 (hover 時顯示)
  
- **拖曳排序**:
  - 可拖動縮圖調整順序
  - 拖動時縮圖變半透明
  - 有虛線方框顯示放置位置

- **照片放大檢視**:
  - 點擊縮圖 → 全螢幕顯示
  - 左右箭頭切換
  - ESC 或點擊背景關閉

**2. Rich Text 編輯器**
- **工具列**:
  - 高度: 40px
  - 背景: #F9FAFB
  - Border-bottom: 1px solid #E5E7EB
  - 按鈕: 32x32px, hover 時背景變灰
  
- **編輯區**:
  - 最小高度: 200px
  - Padding: 16px
  - 字體: 16px
  - 行高: 1.6

- **支援格式**:
  - 粗體 (Ctrl+B)
  - 斜體 (Ctrl+I)
  - 連結 (Ctrl+K)
  - 無序列表
  - 換行

**3. 標籤輸入**
- **已選標籤**:
  - 背景: #DBEAFE
  - 文字: #1E40AF
  - 圓角: 16px
  - Padding: 4px 12px
  - 右側有 X 可刪除

- **新增標籤**:
  - 點擊 [+ 新增標籤]
  - 彈出輸入框
  - 自動建議已使用過的標籤
  - Enter 確認

**4. 公開設定**
- Checkbox + Label
- 預設: 不勾選 (私密)
- 說明文字: 「公開後,其他人可以搜尋到這個地點」(灰色,小字)

**5. 底部按鈕**
- **取消**:
  - 背景: 白色
  - Border: 1px solid #D1D5DB
  - 文字: #374151
  - Hover: 背景 #F9FAFB

- **儲存**:
  - 背景: #3B82F6
  - 文字: 白色
  - Hover: #2563EB
  - Disabled (表單未填完):
    - 背景: #93C5FD
    - Cursor: not-allowed

#### 驗證規則
- **必填欄位**: 地點名稱、日期
- **地點名稱**: 1-200 字元
- **日期**: 不能晚於今天
- **照片**: 單張最大 10MB,總共最多 20 張
- **評分**: 0-5 星 (可不評分)

#### 互動細節

**上傳照片流程:**
1. 點擊 [+ 新增] 或拖曳照片到區域
2. 選擇檔案 (可多選)
3. 顯示 loading (每張照片一個 progress bar)
4. 壓縮照片 (保持品質)
5. 上傳到 Firebase Storage
6. 顯示縮圖
7. 可拖曳調整順序
8. 可點擊縮圖放大檢視
9. 可點擊 X 刪除

**儲存流程:**
1. 點擊「儲存」
2. 驗證所有必填欄位
3. 如果有錯誤:
   - 對應欄位顯示紅色錯誤訊息
   - 捲動到第一個錯誤欄位
   - 停止儲存
4. 如果沒錯誤:
   - 按鈕顯示 loading spinner
   - 按鈕文字變「儲存中...」
   - 儲存到 Firestore
5. 儲存成功:
   - 關閉 Modal
   - 顯示 Toast:「地點已儲存」
   - 更新地圖和列表
6. 儲存失敗:
   - 顯示錯誤訊息 Alert
   - 按鈕恢復正常
   - 可重試

---

## 3. 載入狀態與錯誤處理

### 3.1 Loading 狀態

**全頁載入** (First Load)
```
┌─────────────────┐
│                 │
│                 │
│   [Spinner]     │
│   載入中...     │
│                 │
│                 │
└─────────────────┘
```

**區域載入** (部分更新)
- 使用 Skeleton Screen
- 保持佈局不跳動

**按鈕載入**
- 按鈕內顯示 spinner
- 按鈕變 disabled
- 文字變「處理中...」

### 3.2 錯誤處理

**網路錯誤**
```
┌─────────────────────────────┐
│ ⚠️ 網路連線失敗             │
│ 請檢查您的網路連線後重試    │
│         [重試]              │
└─────────────────────────────┘
```

**表單驗證錯誤**
- 欄位下方顯示紅色文字
- 輸入框 border 變紅色
- 捲動到第一個錯誤欄位

**Toast 通知** (成功/失敗)
- 位置: 螢幕頂部中央
- 顯示 3 秒後自動消失
- 可點擊 X 提前關閉
- 成功: 綠色背景
- 失敗: 紅色背景

---

## 4. 響應式設計斷點

```
Mobile:   < 768px   (手機)
Tablet:   768-1024px (平板)
Desktop:  > 1024px   (桌面)
```

### 4.1 主要變化

**Mobile:**
- 單欄佈局
- 側邊欄改成 Bottom Sheet
- FAB 放大 (更好點擊)
- 字體稍微放大

**Tablet:**
- 可選擇顯示側邊欄
- 地圖 60% + 側邊欄 40%

**Desktop:**
- 地圖 70% + 側邊欄 30%
- Hover 效果更明顯
- 可使用鍵盤快捷鍵

---

## 5. 動畫與轉場

### 5.1 頁面轉場
- 使用 fade-in
- 時間: 300ms
- Easing: ease-out

### 5.2 Modal 彈出
- 從中央 scale-up
- 背景 fade-in
- 時間: 200ms

### 5.3 列表項目
- 新增項目: slide-down
- 刪除項目: slide-up + fade-out
- 時間: 200ms

### 5.4 地圖動畫
- Pin 點擊: bounce
- Zoom: smooth transition
- Pan: smooth

---

## 6. 可訪問性 (A11y)

### 6.1 鍵盤導航
- 所有互動元素可用 Tab 切換
- 按 Enter 觸發點擊
- Modal 打開時 focus 在第一個輸入框
- ESC 關閉 Modal

### 6.2 螢幕閱讀器
- 所有 Icon 按鈕要有 aria-label
- 圖片要有 alt text
- 表單要有 label

### 6.3 顏色對比
- 文字與背景對比至少 4.5:1
- 連結要有底線或明顯顏色差異

---

## 7. 設計資源

### 7.1 Icon 來源
- Heroicons (https://heroicons.com)
- 或 Lucide Icons (https://lucide.dev)

### 7.2 字體
- Google Fonts: Inter + Noto Sans TC

### 7.3 配色參考
參考 Dribbble 搜尋:
- "travel app minimal"
- "map interface"
- "blue color scheme"

---

## 8. 實作檢查清單

每個頁面完成後,檢查:
- [ ] 符合設計稿 (包含間距、顏色、字體)
- [ ] 響應式 (手機、平板、桌面都測試過)
- [ ] 所有互動狀態都有 (hover, active, disabled, loading)
- [ ] 錯誤處理完整 (網路錯誤、驗證錯誤)
- [ ] 可訪問性 (鍵盤導航、螢幕閱讀器)
- [ ] 效能達標 (載入時間、動畫流暢度)

---

## 注意事項

這份設計規格是「最小可行設計」(MVD),只包含 MVP 必要的畫面和互動。

**如果實作時遇到設計未定義的細節,請:**
1. 參考 Material Design 或 Apple HIG 的最佳實踐
2. 保持與現有設計的一致性
3. 優先考慮使用者體驗
4. 記錄下來並更新此文件

**設計原則優先級:**
1. 功能性 > 美觀性
2. 簡單 > 複雜
3. 一致性 > 創新
